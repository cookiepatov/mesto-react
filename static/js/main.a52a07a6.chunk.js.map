{"version":3,"sources":["utils/constants.js","utils/api.js","contexts/CurrentUserContext.js","images/logo.svg","components/Header.js","components/Card.js","components/Main.js","components/Footer.js","components/PopupWithForm.js","utils/validator.js","components/EditProfilePopup.js","components/ImagePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/DeleteCardPopup.js","components/App.js","reportWebVitals.js","index.js"],"names":["validationSettings","api","options","this","_baseUrl","baseUrl","_token","headers","authorization","_contentType","res","ok","json","Promise","reject","status","fetch","then","_resultHandler","name","about","method","body","JSON","stringify","avatar","link","id","setLiked","likeCard","dislikeCard","CurrentUserContext","createContext","Header","className","src","logo","alt","Card","props","card","onCardClick","onDeleteClick","onCardLike","useState","likeIsLoading","setLikeIsLoading","currentUserId","useContext","_id","likes","owner","currentOwnerId","isOwn","isLiked","some","like","deleteBtnClassName","likeBtnLoadingClassName","likeBtnClassName","useEffect","style","backgroundImage","onClick","type","length","Main","onEditProfile","onAddPlace","onEditAvatar","cards","onCardDelete","map","item","Footer","year","Date","getFullYear","PopupWithForm","title","children","isOpen","onClose","onSubmit","formValidity","buttonText","popupClassname","disabled","useFormAndValidation","values","setValues","errors","setErrors","isValid","setIsValid","inputsClasses","setInputsClasses","errorsClasses","setErrorsClasses","resetForm","useCallback","newValues","newErrors","newInputClasses","newErrrorClasses","newIsValid","handleChange","target","inputClass","inputErrorClass","errorClass","errorClassVisible","value","newInputClass","validity","valid","newErrorClass","validationMessage","closest","checkValidity","EditProfilePopup","onUpdateUser","isLoading","currentUser","setButtonText","interval","useRef","dots","i","current","setInterval","clearInterval","description","e","preventDefault","required","minLength","maxLength","placeholder","onChange","ImagePopup","selectedCard","popupClass","EditAvatarPopup","onUpdateAvatar","data","AddPlacePopup","DeleteCardPopup","onDeleteCard","App","isEditProfilePopupOpen","setEditProfilePopupOpen","isAddPlacePopupOpen","setAddPlacePopupOpen","isEditAvatarPopupOpen","setEditAvatarPopupOpen","isDeleteCardPopupOpen","setDeleteCardPopupOpen","isImagePopupOpen","setImagePopupOpen","setSelectedCard","setCurrentUser","setCards","cardToDelete","setCardToDelete","popupDataIsLoading","setPopupDataIsLoading","closeAllPopups","document","removeEventListener","closeOnEsc","closeOnOverlay","setEventListeners","addEventListener","all","getUserInfo","getInitialCards","user","catch","console","log","key","classList","contains","Provider","changeLikeCardStatus","newCard","currentCard","setUserInfo","finally","addNewCard","setUserAvatar","deleteCard","filter","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.a52a07a6.chunk.js","sourcesContent":["const validationSettings = {\r\n  inputClass: 'popup__input',\r\n  inputErrorClass: 'popup__input_type_error',\r\n  errorClass: 'popup__error',\r\n  errorClassVisible: 'popup__error_visible'\r\n};\r\n\r\nconst apiData = {\r\n  baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-22',\r\n  headers: {\r\n    authorization: '175f949a-57a4-4e41-845e-76eb0a4e61c1',\r\n    'Content-Type': 'application/json'\r\n  }\r\n}\r\n\r\nexport {\r\n  validationSettings,\r\n  apiData\r\n};\r\n","import {apiData} from './constants';\r\n\r\nclass Api {\r\n  constructor(options) {\r\n    this._baseUrl = options.baseUrl;\r\n    this._token = options.headers.authorization;\r\n    this._contentType = options.headers['Content-Type'];\r\n  }\r\n\r\n  _resultHandler(res) {\r\n    return res.ok ? res.json() : Promise.reject(`Ошибка: ${res.status}`);\r\n  }\r\n\r\n\r\n  getInitialCards() {\r\n    return fetch(this._baseUrl + '/cards', {\r\n      headers: {\r\n        authorization: this._token\r\n      }\r\n    })\r\n      .then(res => this._resultHandler(res));\r\n  }\r\n\r\n  getUserInfo() {\r\n    return fetch(this._baseUrl + '/users/me', {\r\n      headers: {\r\n        authorization: this._token\r\n      }\r\n    }).then(res => this._resultHandler(res));\r\n\r\n  }\r\n\r\n  setUserInfo(name, about) {\r\n    return fetch(this._baseUrl + '/users/me', {\r\n      method: 'PATCH',\r\n      headers: {\r\n        authorization: this._token,\r\n        'Content-Type': this._contentType\r\n      },\r\n      body: JSON.stringify({\r\n        name,\r\n        about\r\n      })\r\n    }).then(res => this._resultHandler(res));\r\n  }\r\n\r\n  setUserAvatar(avatar) {\r\n    return fetch(this._baseUrl + '/users/me/avatar', {\r\n      method: 'PATCH',\r\n      headers: {\r\n        authorization: this._token,\r\n        'Content-Type': this._contentType\r\n      },\r\n      body: JSON.stringify({\r\n        avatar\r\n      })\r\n    }).then(res => this._resultHandler(res));\r\n\r\n  }\r\n\r\n  addNewCard(name, link) {\r\n    return fetch(this._baseUrl + '/cards', {\r\n      method: 'POST',\r\n      headers: {\r\n        authorization: this._token,\r\n        'Content-Type': this._contentType\r\n      },\r\n      body: JSON.stringify({\r\n        name,\r\n        link\r\n      })\r\n    }).then(res => this._resultHandler(res));\r\n  }\r\n\r\n  deleteCard(id) {\r\n    return fetch(this._baseUrl + '/cards/' + id, {\r\n      method: 'DELETE',\r\n      headers: {\r\n        authorization: this._token\r\n      }\r\n    }).then(res => this._resultHandler(res));\r\n  }\r\n\r\n  changeLikeCardStatus(id, setLiked) {\r\n    if(setLiked) {\r\n      return this.likeCard(id);\r\n    }\r\n    return this.dislikeCard(id);\r\n  }\r\n\r\n  likeCard(id) {\r\n    return fetch(this._baseUrl + '/cards/likes/' + id, {\r\n      method: 'PUT',\r\n      headers: {\r\n        authorization: this._token\r\n      }\r\n    }).then(res => this._resultHandler(res));\r\n  }\r\n\r\n  dislikeCard(id) {\r\n    return fetch(this._baseUrl + '/cards/likes/' + id, {\r\n      method: 'DELETE',\r\n      headers: {\r\n        authorization: this._token\r\n      }\r\n    }).then(res => this._resultHandler(res));\r\n  }\r\n}\r\n\r\nexport const api = new Api(apiData);\r\n","import {createContext} from 'react'\r\n\r\nexport const CurrentUserContext = createContext({});\r\n\r\n","export default __webpack_public_path__ + \"static/media/logo.bbe2a6ea.svg\";","import React from 'react';\r\n\r\nimport logo from '../images/logo.svg'\r\n\r\nfunction Header() {\r\n  return (\r\n    <header className=\"header\">\r\n      <img src={logo} className=\"logo\" alt=\"Mesto Russia\" />\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default Header;\r\n","import {React, useContext, useState, useEffect} from 'react';\r\n\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\n\r\nfunction Card(props) {\r\n  const {\r\n    card,\r\n    onCardClick,\r\n    onDeleteClick,\r\n    onCardLike} = props;\r\n\r\n  const [likeIsLoading, setLikeIsLoading] = useState(false);\r\n  const {_id: currentUserId} = useContext(CurrentUserContext);\r\n\r\n  const {likes, owner, name, link} = card;\r\n  const currentOwnerId = owner._id;\r\n  const isOwn = currentUserId === currentOwnerId;\r\n  const isLiked = likes.some(like => like._id === currentUserId);\r\n\r\n  const deleteBtnClassName = isOwn ? 'element__delete-button' : 'element__delete-button element__delete-button_hidden';\r\n  const likeBtnLikedClassName = isLiked ? 'element__like-button element__like-button_active' : '';\r\n  const likeBtnLoadingClassName = likeIsLoading ? 'element__like-button_loading' : ''\r\n  const likeBtnClassName = `element__like-button ${likeBtnLikedClassName} ${likeBtnLoadingClassName}`\r\n\r\n  useEffect(() => {\r\n    setLikeIsLoading(false);\r\n  },[likes])\r\n\r\n  function handleClick() {\r\n    onCardClick(card);\r\n  }\r\n  function handleDelete() {\r\n    onDeleteClick(card);\r\n  }\r\n  function handleLikeClick () {\r\n    onCardLike(card);\r\n    setLikeIsLoading(true);\r\n  }\r\n\r\n  return (\r\n    <figure className=\"element\">\r\n      <button className=\"element__picture-button\" style={{backgroundImage: `url(${link})`}} onClick={handleClick}/>\r\n      <button type=\"button\" className={deleteBtnClassName}  onClick={handleDelete}></button>\r\n      <figcaption className=\"element__caption\">\r\n        <h2 className=\"element__text\">{name}</h2>\r\n        <div className=\"element__like-container\">\r\n          <button type=\"button\" className={likeBtnClassName} onClick={handleLikeClick}></button>\r\n          <p className=\"element__like-counter\">{likes.length}</p>\r\n        </div>\r\n      </figcaption>\r\n    </figure>)\r\n}\r\n\r\nexport default Card;\r\n","import {React, useContext} from 'react';\r\n\r\nimport Card from './Card';\r\n\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\n\r\nfunction Main(props) {\r\n  const {onEditProfile,\r\n    onAddPlace,\r\n    onEditAvatar,\r\n    onCardClick,\r\n    cards,\r\n    onCardLike,\r\n    onCardDelete} = props;\r\n  const {name, about, avatar} = useContext(CurrentUserContext)\r\n\r\n\r\n  return (\r\n    <main className=\"content\">\r\n      <section className=\"profile\">\r\n        <button className=\"profile__avatar-button\" onClick={onEditAvatar} style={{ backgroundImage: `url(${avatar})` }} />\r\n        <div className=\"profile__info\">\r\n          <h1 className=\"profile__name\">{name}</h1>\r\n          <button type=\"button\" className=\"profile__edit-button\" onClick={onEditProfile}></button>\r\n          <p className=\"profile__description\">{about}</p>\r\n        </div>\r\n        <button type=\"button\" className=\"profile__add-button\" onClick={onAddPlace}></button>\r\n      </section>\r\n\r\n      <section className=\"elements\">\r\n        {cards.map(item => (\r\n        <Card\r\n          card={item}\r\n          key={item._id}\r\n          onCardClick={onCardClick}\r\n          onDeleteClick={onCardDelete}\r\n          onCardLike={onCardLike}/>))}\r\n      </section>\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default Main;\r\n","import {React} from 'react';\r\n\r\nfunction Footer() {\r\n  const year = new Date().getFullYear();\r\n  return (\r\n    <footer className=\"footer\">\r\n      <p className=\"copyright\">\r\n        &copy; {year} Mesto Russia\r\n      </p>\r\n    </footer>\r\n  );\r\n}\r\n\r\nexport default Footer;\r\n","import React from 'react';\r\n\r\nfunction PopupWithForm(props) {\r\n  const {name, title, children, isOpen, onClose, onSubmit, formValidity, buttonText} = props;\r\n  const popupClassname = isOpen ? `popup popup_type_${name} popup_opened` : `popup popup_type_${name}`\r\n\r\n  return (\r\n    <section className={popupClassname}>\r\n      <div className=\"popup__container\">\r\n        <button type=\"button\" className=\"popup__close-button\" onClick={onClose}></button>\r\n        <h2 className=\"popup__title\">\r\n          {title}\r\n        </h2>\r\n        <form className=\"popup__form\" name={name} onSubmit={onSubmit}>\r\n          {children}\r\n        <button\r\n          type=\"submit\"\r\n          className=\"popup__button\"\r\n          disabled={!formValidity}>{buttonText}</button>\r\n        </form>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default PopupWithForm;\r\n","import {useState, useCallback} from 'react';\r\nimport {validationSettings} from './constants';\r\n\r\nexport function useFormAndValidation() {\r\n  const [values, setValues] = useState({});\r\n  const [errors, setErrors] = useState({});\r\n  const [isValid, setIsValid] = useState(true);\r\n  const [inputsClasses, setInputsClasses] = useState({});\r\n  const [errorsClasses, setErrorsClasses] = useState({});\r\n\r\n  const handleChange = ({target}) => {\r\n    const {inputClass, inputErrorClass, errorClass, errorClassVisible} = validationSettings\r\n    const {name, value} = target;\r\n    const newInputClass = target.validity.valid ? inputClass : `${inputClass} ${inputErrorClass}`;\r\n    const newErrorClass = target.validity.valid ? errorClass: `${errorClass} ${errorClassVisible}`;\r\n    setValues({...values, [name]: value });\r\n    setErrors({...errors, [name]: target.validationMessage});\r\n    setInputsClasses({...inputsClasses, [name]: newInputClass});\r\n    setErrorsClasses({...errorsClasses, [name]: newErrorClass});\r\n    setIsValid(target.closest('form').checkValidity());\r\n  };\r\n\r\n\r\n\r\n  const resetForm = useCallback((newValues = {}, newErrors = {}, newInputClasses = {}, newErrrorClasses = {}, newIsValid = false) => {\r\n    setValues(newValues);\r\n    setErrors(newErrors);\r\n    setIsValid(newIsValid);\r\n    setInputsClasses(newInputClasses);\r\n    setErrorsClasses(newErrrorClasses)\r\n  }, [setValues, setErrors, setIsValid]);\r\n\r\n  return {values, handleChange, errors, inputsClasses, errorsClasses, isValid, resetForm, setValues, setIsValid};\r\n}\r\n","import {React, useState, useEffect, useContext, useRef} from 'react';\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nimport {useFormAndValidation} from '../utils/validator';\r\nimport {validationSettings} from '../utils/constants';\r\n\r\nfunction EditProfilePopup(props) {\r\n  const {isOpen, onClose, onUpdateUser, isLoading} = props\r\n  const {inputClass, errorClass} = validationSettings;\r\n  const {values,\r\n    handleChange,\r\n    errors,\r\n    inputsClasses,\r\n    errorsClasses,\r\n    isValid,\r\n    resetForm} = useFormAndValidation();\r\n\r\n  const currentUser = useContext(CurrentUserContext);\r\n  const [buttonText, setButtonText] = useState('Сохранить');\r\n  const interval = useRef();\r\n\r\n  useEffect(() => {\r\n    if (isLoading) {\r\n      const dots = ['.','..','...'];\r\n      let i = 0\r\n      interval.current = setInterval(()=>{\r\n        setButtonText(`Сохранение${dots[i]}`);\r\n        i = (i === 2) ? 0 : i + 1;\r\n      },500)\r\n    } else {\r\n      clearInterval(interval.current)\r\n      setButtonText(`Сохранить`);\r\n    }\r\n  },[isLoading])\r\n\r\n  useEffect(() => {\r\n    resetForm(\r\n      {name: currentUser.name, description: currentUser.about},\r\n      {name: '', description: ''},\r\n      {name:inputClass, description:inputClass},\r\n      {name:errorClass, description:errorClass},\r\n      true);\r\n  }, [isOpen]);\r\n\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    const {name, description: about} = values;\r\n    onUpdateUser({name, about});\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name={'profile'}\r\n      title={'Редактировать профиль'}\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      buttonText={buttonText}\r\n      formValidity={isValid}>\r\n      <input\r\n        id=\"profile-name-input\"\r\n        name=\"name\"\r\n        required\r\n        minLength=\"2\"\r\n        maxLength=\"40\"\r\n        className={inputsClasses.name}\r\n        placeholder=\"Ваше имя\"\r\n        value={values.name}\r\n        onChange={handleChange} />\r\n      <span className={errorsClasses.name}>{errors.name}</span>\r\n      <input\r\n        id=\"profile-description-input\"\r\n        name=\"description\"\r\n        required minLength=\"2\"\r\n        maxLength=\"200\"\r\n        className={inputsClasses.description}\r\n        placeholder=\"Описание\"\r\n        value={values.description}\r\n        onChange={handleChange} />\r\n      <span className={errorsClasses.description}>{errors.description}</span>\r\n    </PopupWithForm>)\r\n}\r\n\r\nexport default EditProfilePopup\r\n","import React from 'react';\r\n\r\nfunction ImagePopup(props) {\r\n  const {isOpen, onClose, selectedCard} = props;\r\n  const src = selectedCard ? selectedCard.link : '#';\r\n  const title = selectedCard ? selectedCard.name : '';\r\n  const popupClass = isOpen ? 'popup popup_opened popup_type_full-view' : 'popup popup_type_full-view'\r\n  return (\r\n    <section className={popupClass}>\r\n      <figure className=\"popup__picture-container\">\r\n        <div className=\"popup__picture-elements\">\r\n          <button type=\"button\" className=\"popup__close-button\" onClick={onClose}></button>\r\n          <img className=\"popup__full-picture\"\r\n            alt=\"Полноэкранный просмотр\"\r\n            src={src} />\r\n          <h2 className=\"popup__picture-title\">{title}</h2>\r\n        </div>\r\n      </figure>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default ImagePopup;\r\n","import {React, useEffect, useRef, useState} from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport {useFormAndValidation} from '../utils/validator'\r\nimport {validationSettings} from '../utils/constants';\r\n\r\nfunction EditAvatarPopup(props) {\r\n  const {isOpen, onClose, onUpdateAvatar, isLoading} = props;\r\n  const {inputClass, errorClass} = validationSettings;\r\n  const {values,\r\n    handleChange,\r\n    errors,\r\n    inputsClasses,\r\n    errorsClasses,\r\n    isValid,\r\n    resetForm} = useFormAndValidation();\r\n  const [buttonText, setButtonText] = useState('Сохранить');\r\n  const interval = useRef();\r\n\r\n  useEffect(() => {\r\n    if (isLoading) {\r\n      const dots = ['.','..','...'];\r\n      let i = 0\r\n      interval.current = setInterval(()=>{\r\n        setButtonText(`Сохранение${dots[i]}`);\r\n        i = (i === 2) ? 0 : i + 1;\r\n      },500)\r\n    } else {\r\n      clearInterval(interval.current)\r\n      setButtonText(`Сохранить`);\r\n    }\r\n  },[isLoading])\r\n\r\n  useEffect(() => {\r\n    resetForm(\r\n      {data: ''},\r\n      {data: ''},\r\n      {data: inputClass},\r\n      {data: errorClass},\r\n      false);\r\n  }, [isOpen]);\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onUpdateAvatar(values.data);\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name={'avatar'}\r\n      title={'Обновить аватар'}\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      buttonText={buttonText}\r\n      formValidity={isValid}>\r\n      <input\r\n        id=\"avatar-link-input\"\r\n        name=\"data\"\r\n        required\r\n        type=\"url\"\r\n        className={inputsClasses.data}\r\n        placeholder=\"Ссылка на аватар\"\r\n        value={values.data}\r\n        onChange={handleChange} />\r\n      <span className={errorsClasses.data}>{errors.data}</span>\r\n    </PopupWithForm>\r\n\r\n  )\r\n}\r\n\r\nexport default EditAvatarPopup;\r\n","import {React, useState, useEffect, useRef} from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport {useFormAndValidation} from '../utils/validator';\r\nimport {validationSettings} from '../utils/constants';\r\n\r\nfunction AddPlacePopup(props) {\r\n  const {isOpen, onClose, onAddPlace, isLoading} = props;\r\n  const {inputClass, errorClass} = validationSettings;\r\n  const {values,\r\n    handleChange,\r\n    errors,\r\n    inputsClasses,\r\n    errorsClasses,\r\n    isValid,\r\n    resetForm} = useFormAndValidation();\r\n  const [buttonText, setButtonText] = useState('Сохранить');\r\n  const interval = useRef();\r\n\r\n  useEffect(() => {\r\n    if (isLoading) {\r\n      const dots = ['.','..','...'];\r\n      let i = 0\r\n      interval.current = setInterval(()=>{\r\n        setButtonText(`Сохранение${dots[i]}`);\r\n        i = (i === 2) ? 0 : i + 1;\r\n      },500)\r\n    } else {\r\n      clearInterval(interval.current)\r\n      setButtonText(`Сохранить`);\r\n    }\r\n  },[isLoading])\r\n\r\n  useEffect(() => {\r\n    resetForm(\r\n      {name: '', data: ''},\r\n      {name: '', data: ''},\r\n      {name:inputClass, data:inputClass},\r\n      {name:errorClass, data:errorClass});\r\n  }, [isOpen]);\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    const {name, data: link} = values;\r\n    onAddPlace({name, link});\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name={'card'}\r\n      title={'Новое место'}\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      buttonText={buttonText}\r\n      formValidity={isValid}>\r\n      <input\r\n        id=\"place-name-input\"\r\n        name=\"name\"\r\n        required\r\n        minLength=\"2\"\r\n        maxLength=\"30\"\r\n        className={inputsClasses.name}\r\n        placeholder=\"Название\"\r\n        onChange={handleChange}\r\n        value={values.name} />\r\n      <span className={errorsClasses.name}>{errors.name}</span>\r\n      <input\r\n        id=\"place-link-input\"\r\n        name=\"data\"\r\n        required\r\n        type=\"url\"\r\n        className={inputsClasses.data}\r\n        placeholder=\"Ссылка на картинку\"\r\n        onChange={handleChange}\r\n        value={values.data}/>\r\n      <span className={errorsClasses.data}>{errors.data}</span>\r\n    </PopupWithForm>\r\n  )\r\n}\r\n\r\nexport default AddPlacePopup;\r\n","import {React, useState, useEffect, useRef} from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction DeleteCardPopup(props) {\r\n  const {isOpen, onClose, selectedCard, onDeleteCard, isLoading} = props;\r\n  const [buttonText, setButtonText] = useState('Да');\r\n  const interval = useRef();\r\n\r\n  useEffect(() => {\r\n    if (isLoading) {\r\n      const dots = ['.','..','...'];\r\n      let i = 0\r\n      interval.current = setInterval(()=>{\r\n        setButtonText(`Удаление${dots[i]}`);\r\n        i = (i === 2) ? 0 : i + 1;\r\n      },500)\r\n    } else {\r\n      clearInterval(interval.current)\r\n      setButtonText(`Да`);\r\n    }\r\n  },[isLoading])\r\n\r\n\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onDeleteCard(selectedCard);\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name={'remove-card'}\r\n      title={'Вы уверены?'}\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      buttonText={buttonText}\r\n      formValidity={true}>\r\n  </PopupWithForm>\r\n\r\n  )\r\n}\r\n\r\n\r\nexport default DeleteCardPopup;\r\n","import {React, useEffect, useState, useCallback} from 'react';\r\n\r\nimport {api} from '../utils/api';\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\n\r\nimport Header from './Header';\r\nimport Main from './Main'\r\nimport Footer from './Footer';\r\nimport EditProfilePopup from './EditProfilePopup';\r\nimport ImagePopup from './ImagePopup';\r\nimport EditAvatarPopup from './EditAvatarPopup';\r\nimport AddPlacePopup from './AddPlacePopup';\r\nimport DeleteCardPopup from './DeleteCardPopup';\r\n\r\nfunction App() {\r\n  const [isEditProfilePopupOpen, setEditProfilePopupOpen] = useState(false);\r\n  const [isAddPlacePopupOpen, setAddPlacePopupOpen] = useState(false);\r\n  const [isEditAvatarPopupOpen, setEditAvatarPopupOpen] = useState(false);\r\n  const [isDeleteCardPopupOpen, setDeleteCardPopupOpen] = useState(false);\r\n  const [isImagePopupOpen, setImagePopupOpen] = useState(false);\r\n  const [selectedCard, setSelectedCard] = useState({});\r\n  const [currentUser, setCurrentUser] = useState({});\r\n  const [cards, setCards] = useState([]);\r\n  const [cardToDelete, setCardToDelete] = useState({});\r\n  const [popupDataIsLoading, setPopupDataIsLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    Promise.all([api.getUserInfo(), api.getInitialCards()])\r\n      .then(([user, cards]) => {\r\n        setCurrentUser(user);\r\n        setCards(cards);\r\n      }).catch(console.log);\r\n  }, [])\r\n\r\n  function handleEditAvatarClick() {\r\n    setEventListeners();\r\n    setEditAvatarPopupOpen(true);\r\n\r\n  }\r\n\r\n  function handleEditProfileClick() {\r\n    setEventListeners();\r\n    setEditProfilePopupOpen(true);\r\n  }\r\n\r\n  function handleAddPlaceClick() {\r\n    setEventListeners();\r\n    setAddPlacePopupOpen(true)\r\n  }\r\n\r\n  function handleDeleteCardClick(card) {\r\n    setEventListeners();\r\n    setDeleteCardPopupOpen(true);\r\n    setCardToDelete(card);\r\n  }\r\n\r\n  function handleCardClick(card) {\r\n    setEventListeners();\r\n    setImagePopupOpen(true);\r\n    setSelectedCard(card);\r\n  }\r\n\r\n  function closeAllPopups() {\r\n    removeEventListeners();\r\n    setEditAvatarPopupOpen(false);\r\n    setEditProfilePopupOpen(false);\r\n    setAddPlacePopupOpen(false);\r\n    setDeleteCardPopupOpen(false)\r\n    setImagePopupOpen(false);\r\n    setSelectedCard({});\r\n    setCardToDelete({})\r\n  }\r\n\r\n  function handleUpdateUser({ name, about }) {\r\n    setPopupDataIsLoading(true);\r\n    api.setUserInfo(name, about)\r\n      .then(user => {\r\n        setCurrentUser(user);\r\n        closeAllPopups();\r\n      })\r\n      .catch(console.log)\r\n      .finally(() => {\r\n        setPopupDataIsLoading(false)\r\n      });\r\n  }\r\n\r\n  function handleUpdateAvatar(link) {\r\n    setPopupDataIsLoading(true);\r\n    api.setUserAvatar(link)\r\n      .then(user => {\r\n        setCurrentUser(user);\r\n        closeAllPopups();\r\n    })\r\n      .catch(console.log)\r\n      .finally(() => {\r\n        setPopupDataIsLoading(false)\r\n    });\r\n  }\r\n\r\n  function handleCardLike(card) {\r\n    const isLiked = card.likes.some(like => like._id === currentUser._id);\r\n    api.changeLikeCardStatus(card._id, !isLiked).then((newCard) => {\r\n      setCards(cards => cards\r\n        .map(currentCard => currentCard._id === card._id ? newCard : currentCard));\r\n      closeAllPopups();\r\n    }).catch(console.log);\r\n  }\r\n\r\n  function handleConfirmDelete(card) {\r\n    setPopupDataIsLoading(true);\r\n    api.deleteCard(card._id)\r\n      .then(() => {\r\n        setCards(cards => cards\r\n          .filter(currentCard => currentCard._id !== card._id));\r\n        closeAllPopups();\r\n      })\r\n      .catch(console.log)\r\n      .finally(() => {\r\n        setPopupDataIsLoading(false)\r\n    });\r\n  }\r\n\r\n  function handleAddCard({ name, link }) {\r\n    setPopupDataIsLoading(true);\r\n    api.addNewCard(name, link)\r\n      .then(newCard => {\r\n        setCards(cards => [newCard, ...cards]);\r\n      closeAllPopups();\r\n    })\r\n      .catch(console.log)\r\n      .finally(() => {\r\n        setPopupDataIsLoading(false);\r\n      });\r\n  }\r\n\r\n  function setEventListeners() {\r\n    document.addEventListener('keydown', closeOnEsc);\r\n    document.addEventListener('pointerdown', closeOnOverlay);\r\n  }\r\n\r\n  function removeEventListeners() {\r\n    document.removeEventListener('keydown', closeOnEsc);\r\n    document.removeEventListener('pointerdown', closeOnOverlay);\r\n  }\r\n\r\n\r\n  const closeOnEsc = useCallback((e) => {\r\n    if (e.key === 'Escape') {\r\n      closeAllPopups();\r\n    }\r\n  }, []);\r\n\r\n  const closeOnOverlay = useCallback((e) => {\r\n    if (e.target.classList.contains('popup')) {\r\n      closeAllPopups();\r\n    }\r\n  }, [])\r\n\r\n  return (\r\n    <CurrentUserContext.Provider value={currentUser}>\r\n      <div className=\"page\">\r\n        <Header />\r\n        <Main\r\n          onEditProfile={handleEditProfileClick}\r\n          onAddPlace={handleAddPlaceClick}\r\n          onEditAvatar={handleEditAvatarClick}\r\n          onCardClick={handleCardClick}\r\n          cards={cards}\r\n          onCardLike={handleCardLike}\r\n          onCardDelete={handleDeleteCardClick}\r\n        />\r\n        <Footer />\r\n        <EditProfilePopup\r\n          onUpdateUser={handleUpdateUser}\r\n          onClose={closeAllPopups}\r\n          isOpen={isEditProfilePopupOpen}\r\n          isLoading={popupDataIsLoading} />\r\n        <AddPlacePopup\r\n          onAddPlace={handleAddCard}\r\n          onClose={closeAllPopups}\r\n          isOpen={isAddPlacePopupOpen}\r\n          isLoading={popupDataIsLoading} />\r\n        <EditAvatarPopup\r\n          onUpdateAvatar={handleUpdateAvatar}\r\n          onClose={closeAllPopups}\r\n          isOpen={isEditAvatarPopupOpen}\r\n          isLoading={popupDataIsLoading} />\r\n        <DeleteCardPopup\r\n          onDeleteCard={handleConfirmDelete}\r\n          onClose={closeAllPopups}\r\n          isOpen={isDeleteCardPopupOpen}\r\n          selectedCard={cardToDelete}\r\n          isLoading={popupDataIsLoading} />\r\n        <ImagePopup\r\n          isOpen={isImagePopupOpen}\r\n          onClose={closeAllPopups}\r\n          selectedCard={selectedCard} />\r\n      </div>\r\n    </CurrentUserContext.Provider>\r\n\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}